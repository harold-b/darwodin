---

Defs: ../definitions/macos/iokit.json

Mono  : { Emit: false }
CSharp: { Emit: false }

Cpp:
  Emit: false
  ExportInternals: true
  DontWrapCFunctions: true
  ExportForwardDeclarations: true

  ExportTypes:
    - ^IO.+
    - ^io_.+

  ExportMethods:
    - ^::IO.+

  ExportVars:
    - ^::k?IO.+

  IgnoreTypes  : []
  IgnoreMethods: []


Odin:
  Emit           : true
  ExportPath     : ..
  BasePackageName: darwodin
  SingleFile     : false
  TargetPlatform : Darwin
  ExportTypeMapDir: ../exports
  ExternalTypes:
    - ../exports/global.exports.yml
    - ../mach/exports/mach.exports.yml
    - ../exports/CoreFoundation.exports.yml

  ResolvedTypedefs:
    - '[su]?int.*'
    # - ^boolean_t$

  NoDistinctTypedefs: true
  DistinctTypeDefs:
    - ^IOCacheMode$
    - ^DeviceNumber$

  Packages:
    - Name  : IOKit
      Export: IO
      DarwinLinkLibs: [system:IOKit.framework]
      Filter: .*

      # Imports:
      #   - |

      # TypeMap:


  # Symbol Transformers
  EnumTransforms:
    - Type: .*
      Transforms:
      - Kind: RemoveTypeWordsFromElements
      - Kind: RemovePartialTypeNamePrefix
      - Kind: RemoveUnderscorePrefix
      - Kind: UnderscoreNumbers


  TypeTransforms:
    - Type: ^(IO).+
      Transforms:
      - Kind  : RemovePrefix
        Source: $group0
    - Type: (Flag|Option|Mask)$  # Transforms for bit_set types
      Transforms:
      - Kind  : AppendSuffix
        Source: s

  BitSetMap:
    - Type: (Mask|Flags?|Options?)$ # Transforms the enum that will generate a bit_set to not have a collision type
      Transforms:
        - Kind  : RemoveSuffix
          Source: s
 
  ProcTransforms:
  - Type: ^(_*IO|io).+
    Transforms:
    - Kind  : RemovePrefix
      Source: $group0

  VarTransforms:
    - Type: ^(_?kIO).+
      Transforms:
        - Kind  : ReplacePrefix
          Source: $group0
          Target: k
    - Type: ^(_*IO).+
      Transforms:
        - Kind  : RemovePrefix
          Source: $group0
